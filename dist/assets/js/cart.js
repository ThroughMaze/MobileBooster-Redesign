import"./bootstrap.js";/* empty css     */import"./bootstrap.min.js";class d{constructor(){this.items=this.loadCart(),this.init()}init(){this.bindEvents(),this.updateDisplay(),this.checkEmptyCart()}bindEvents(){var e;document.querySelectorAll(".quantity-increase").forEach(t=>{t.addEventListener("click",o=>this.increaseQuantity(o))}),document.querySelectorAll(".quantity-decrease").forEach(t=>{t.addEventListener("click",o=>this.decreaseQuantity(o))}),document.querySelectorAll(".quantity-input").forEach(t=>{t.addEventListener("change",o=>this.updateQuantity(o))}),document.querySelectorAll(".remove-item").forEach(t=>{t.addEventListener("click",o=>this.removeItem(o))}),(e=document.getElementById("apply-coupon"))==null||e.addEventListener("click",()=>this.applyCoupon()),document.querySelectorAll(".product-card .btn").forEach(t=>{t.addEventListener("click",o=>this.addToCart(o))}),this.initFormValidation()}increaseQuantity(e){const t=e.target.closest(".cart-item"),o=t.querySelector(".quantity-input"),a=parseInt(o.value)+1;o.value=a,this.updateItemTotal(t,a),this.updateTotals(),this.saveCart()}decreaseQuantity(e){const t=e.target.closest(".cart-item"),o=t.querySelector(".quantity-input"),a=Math.max(1,parseInt(o.value)-1);o.value=a,this.updateItemTotal(t,a),this.updateTotals(),this.saveCart()}updateQuantity(e){const t=e.target.closest(".cart-item"),o=Math.max(1,parseInt(e.target.value)||1);e.target.value=o,this.updateItemTotal(t,o),this.updateTotals(),this.saveCart()}updateItemTotal(e,t){const o=e.querySelector(".item-price"),s=(parseFloat(o.dataset.price)*t).toFixed(2);o.textContent=`£${s}`}removeItem(e){const t=e.target.closest(".cart-item"),o=t.dataset.productId;t.style.transition="opacity 0.3s ease",t.style.opacity="0",setTimeout(()=>{t.remove(),this.removeFromStorage(o),this.updateTotals(),this.checkEmptyCart()},300)}updateTotals(){let e=0;document.querySelectorAll(".cart-item").forEach(i=>{const l=i.querySelector(".item-price").textContent,u=parseFloat(l.replace("£",""));e+=u});const t=this.getShippingCost(),o=this.getDiscount(e),a=(e-o)*.2,s=e-o+t+a;document.querySelector(".subtotal").textContent=`£${e.toFixed(2)}`,document.querySelector(".shipping").textContent=t===0?"Free":`£${t.toFixed(2)}`,document.querySelector(".vat").textContent=`£${a.toFixed(2)}`,document.querySelector(".total").textContent=`£${s.toFixed(2)}`;const r=document.querySelector(".discount-row");o>0?(r.classList.remove("d-none"),document.querySelector(".discount").textContent=`-£${o.toFixed(2)}`):r.classList.add("d-none")}getShippingCost(){return this.getSubtotal()>=200,0}getSubtotal(){let e=0;return document.querySelectorAll(".cart-item").forEach(t=>{const o=t.querySelector(".item-price").textContent,a=parseFloat(o.replace("£",""));e+=a}),e}getDiscount(e){const t=localStorage.getItem("appliedCoupon");return t==="SAVE10"?e*.1:t==="SAVE20"?e*.2:0}applyCoupon(){const e=document.getElementById("coupon-code"),t=e.value.trim().toUpperCase(),o={SAVE10:"10% discount applied!",SAVE20:"20% discount applied!",WELCOME:"15% discount applied!"};o[t]?(localStorage.setItem("appliedCoupon",t),this.showMessage(o[t],"success"),this.updateTotals(),e.value=""):this.showMessage("Invalid coupon code","error")}showMessage(e,t){const o=document.createElement("div");o.className=`alert alert-${t==="success"?"success":"danger"} position-fixed`,o.style.cssText="top: 20px; right: 20px; z-index: 9999; min-width: 300px;",o.textContent=e,document.body.appendChild(o),setTimeout(()=>{o.remove()},3e3)}checkEmptyCart(){const e=document.querySelectorAll(".cart-item"),t=document.querySelector(".empty-cart"),o=document.querySelector(".cart-items");e.length===0?(t.classList.remove("d-none"),o.style.display="none"):(t.classList.add("d-none"),o.style.display="block")}addToCart(e){e.preventDefault();const t=e.target.closest(".product-card"),o=t.querySelector("h6").textContent;t.querySelector(".fw-bold").textContent,this.showMessage(`${o} added to cart!`,"success")}loadCart(){const e=localStorage.getItem("cart");return e?JSON.parse(e):[]}saveCart(){const e=[];document.querySelectorAll(".cart-item").forEach(t=>{const o=t.dataset.productId,a=parseInt(t.querySelector(".quantity-input").value),s=parseFloat(t.querySelector(".item-price").dataset.price);e.push({id:o,quantity:a,price:s})}),localStorage.setItem("cart",JSON.stringify(e))}removeFromStorage(e){this.items=this.items.filter(t=>t.id!==e),localStorage.setItem("cart",JSON.stringify(this.items))}updateDisplay(){this.updateTotals()}initFormValidation(){const e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",o=>{t.checkValidity()||(o.preventDefault(),o.stopPropagation()),t.classList.add("was-validated")},!1)})}}document.addEventListener("DOMContentLoaded",()=>{new d});document.addEventListener("DOMContentLoaded",()=>{const c=document.querySelector('[data-bs-toggle="collapse"]'),e=document.querySelector(".fullscreen-nav");c&&e&&c.addEventListener("click",()=>{c.classList.toggle("active"),e.classList.toggle("active")})});document.querySelectorAll(".country-item").forEach(c=>{c.addEventListener("click",e=>{const t=e.currentTarget.querySelector("input[type=radio]"),o=e.currentTarget.querySelector("img"),a=document.querySelector("#openPopup img");t&&t.checked&&o&&a?a.src=o.src:a&&(a.src="https://flagcdn.com/gb.svg")})});var n;(n=document.querySelector(".subscribe-form"))==null||n.addEventListener("submit",c=>{c.preventDefault(),c.currentTarget.checkValidity()&&c.currentTarget.classList.add("subscribed")});
